<!DOCTYPE html>
<html lang="en-us">
    <head>
         
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="google-site-verification" content="jRQhpy8gMCZrej7IGSsMNAGcUO70AZ8UmfKA_WaAlPY" />
        <title>Create My First 24/7 Telegram Bot On Python</title>
        
        <style>

    html body {
        font-family: 'Assistant', sans-serif;
        background-color: white;
    }

    :root {
        --accent: green;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://brenda-thng.netlify.com/css/main.css">





<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Assistant">


 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/solarized-dark.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 


    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

     <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script> 

    <script>hljs.initHighlightingOnLoad();</script>







<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.40.1" />
        

        
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120655635-1"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments)};
          gtag('js', new Date());

          gtag('config', 'UA-120655635-1');
        </script>
        
    </head>

    
    
    <script type="text/javascript" async
      src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    

    <body>
         
        <nav class="navbar navbar-default navbar-fixed-top">

            <div class="container">

                <div class="navbar-header">

                    <a class="navbar-brand visible-xs" href="#">Create My First 24/7 Telegram Bot On Python</a>

                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>

                </div>

                <div class="collapse navbar-collapse">

                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/">Home</a></li>
                            
                                <li><a href="/posts/">Posts</a></li>
                            
                                <li><a href="/projects/">Projects</a></li>
                            
                                <li><a href="/resume/">Resume</a></li>
                            
                                <li><a href="/musings/">Musings</a></li>
                            
                        </ul>
                    

                    
                        <ul class="nav navbar-nav navbar-right">
                            
                                <li class="navbar-icon"><a href="mailto:brenda.thng@u.nus.edu.com"><i class="fa fa-envelope-o"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://github.com/breadplop/"><i class="fa fa-github"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://twitter.com/retardedfactor/"><i class="fa fa-twitter"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.linkedin.com/in/brenda-thng-b10265130/"><i class="fa fa-linkedin"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://www.stackoverflow.com/username/"><i class="fa fa-stack-overflow"></i></a></li>
                            
                                <li class="navbar-icon"><a href="https://docs.google.com/document/d/1eyDSzV6hueRA6yl05hzjWYEhe6MBJQ8sHp_Mv_N9ETc/edit?usp=sharing"><i class="fa fa-star"></i></a></li>
                            
                        </ul>
                    

                </div>

            </div>

        </nav>


<main>

    <div class="item">

    
    
    

    
    

    <h4><a href="/projects/create-my-first-telegram-bot-python/">Create My First 24/7 Telegram Bot On Python</a></h4>
    <h5>December 5, 2018 </h5>
    
    <a href="https://brenda-thng.netlify.com/tags/python"><kbd class="item-tag">python</kbd></a>
    
    <a href="https://brenda-thng.netlify.com/tags/telegram-bot"><kbd class="item-tag">telegram bot</kbd></a>
    
    <a href="https://brenda-thng.netlify.com/tags/short-tutorials-that-work"><kbd class="item-tag">short tutorials that work</kbd></a>
    

</div>


    <br> <div class="text-justify">

<blockquote>
<p>Hello!</p>
</blockquote>

<h1 id="what-this-post-is-about">What this post is about</h1>

<p>So today I am going to write about how I (1) created my first Telegram bot on python, and (2) manage to host it <sup>24</sup>&frasl;<sub>7</sub> for free.</p>

<p>The reason I am writing this is because I had encountered some issues while looking for a beginner tutorial teaching me how to write telegram bots.</p>

<p>And after writing the bot, I wanted my bot to be live without having me to pay for anything. I ran into some issues hosting them and getting the bot to run <sup>24</sup>&frasl;<sub>7</sub>, and had to rewrite my entire code. Thankfully it was a simple bot, so there wasn&rsquo;t much code to change.</p>

<p><em>TLDR:</em>
Go to section <strong>Coding the BOT</strong> to dive straight into the details.</p>

<p>Note: There are many ways to code a telegrambot and I am just showing one of the many ways.</p>

<hr />

<h1 id="what-the-bot-is-about">What the bot is about</h1>

<h3 id="problem">Problem</h3>

<p>I lived in a hostal where breakfast is daily except Sunday and dinner is provided daily except Saturday. At the start of the semester, we were provided with an excel sheet of the daily menu. So just imagine an excel sheet with the dinner menus from August up till December. It wasn&rsquo;t ugly, but it ain&rsquo;t pretty either. If I wanted to find out what was served for dinner that evening, I would have to pull up that excel sheet and navigate through the multiple sheets and cells to get the information I need. Hence a group of friends and I decided to come together to create a mealbot that will return us the menu of the day.</p>

<h3 id="what-i-need">What I need</h3>

<p>For this tutorial, I will be using:
- glitch
- uptime robot</p>

<h3 id="overview-of-code">Overview of Code</h3>

<p>Long story short, in order for me to host the app <sup>24</sup>&frasl;<sub>7</sub> for free, I needed to create my app as a Flask App.</p>

<p>Jobs to be done:</p>

<ol>
<li>Prepare the data (menus)</li>
<li>Code the bot on Python on <a href="https://glitch.com">Glitch</a></li>
<li>Host the bot on Glitch and ping it every 5 minutes using <a href="https://uptimerobot.com">Uptime Robot</a></li>
</ol>

<h3 id="pre-code">Pre-code</h3>

<blockquote>
<p><em>“By failing to prepare, you are preparing to fail.”<br />
― Benjamin Franklin</em></p>
</blockquote>

<p>Before coding anything, we will first need to prepare the data. The excel sheet was not formatted in the most computer-friendly/computer-readable fashion, so the first thing I did was to reorganize the data into a format that makes it <strong>easy for me to retrieve each daily menu</strong>.</p>

<p><em>img:Before</em></p>

<p><em>img:After</em></p>

<h3 id="coding-the-bot">Coding the BOT</h3>

<p>Next we code out the bot. I used the <a href="https://github.com/eternnoir/pyTelegramBotAPI">TeleBot</a> . Another very popular library is <a href="https://github.com/python-telegram-bot/python-telegram-bot">Python Telegram Bot library</a>.</p>

<p>I have also uploaded my code <a href="https://github.com/breadplop/glitchbot">here</a>, look at <code>bot.py</code> to view the code for the bot. But the main steps are as follow:</p>

<ol>
<li>Use BotFather on Telegram to get your Telegram API token.</li>
<li>Set up a Glitch account</li>
<li>Create a telegram bot on glitch by creating a new glitch app.</li>
<li>Now here&rsquo;s the thing you need to do to be able to host your app successfully in future, you need to make your telegram bot a Flask App.</li>
<li>Here is <a href="https://glitch.com/edit/#!/truth-mine?path=README.md:1:0">mine</a></li>
<li>Look at the <a href="https://github.com/eternnoir/pyTelegramBotAPI#writing-your-first-bot">documentation</a> to create the bot according to what you want</li>
</ol>

<h3 id="hosting-and-making-it-live">Hosting and making it live</h3>

<p>On glitch, your bot is automatically on its own server. However the catch is that glitch will bring your app (aka bot) to sleep if it does not receive any request after 5 minutes. This means that you have to send messages/play/talk/scream to your bot every 5 minutes or glitch will put it to sleep. To overcome this issue, I made use of a tool called UptimeRobot to send a ping to my bot every 5 minutes, hence keeping it awake. There are detailed instructions in this <a href="https://support.glitch.com/t/how-to-make-a-glitch-project-to-run-constantly/2439">forum post.</a></p>

<h3 id="improvements">Improvements</h3>

<p>I have yet to release the bot live and have only made it known to a couple of friends. This is because there are some improvements that I want done before I let more people know about it.</p>

<ol>
<li>Create logs for whenever someone uses the bot</li>
<li>Fix the bug where the buttons only work according to the time the button was sent, and not when the button was pressed.</li>
</ol>

<hr />

<h4 id="the-end">The end</h4>

<p>And that concludes this tutorial. It is not your usual tutorial, and I&rsquo;m sorry if it is a bit fuzzy at the moment. I just wanted to compile a list of tutorials that I found helpful, and to show and document a solution that works. Feel free to check out my bot at <a href="https://t.me/breadtest_bot">https://t.me/breadtest_bot</a></p>
</div>

    
    

    

    

        <h4 class="page-header">Comments</h4>

        <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "username" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    

</main>

        <footer>

            <p class="copyright text-muted">&copy; All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a></p>

        </footer>
       
    </body>

</html>

